<!DOCTYPE HTML>

<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:th="http://www.thymeleaf.org">

<!-- Class Event Title -->
<div th:fragment="event">

    <div class="form-group row">
        <label for="category" class="col-3 col-form-label">Category:</label>
        <div class="col-9">
            <input type="text" id="category" class="form-control form-control-sm"/>
        </div>
    </div>

    <div class="form-group row">
        <label for="room" class="col-3 col-form-label">Room:</label>
        <div class="col-9">
            <input type="text" id="room" class="form-control form-control-sm"/>
        </div>
    </div>

    <div class="form-group row">
        <label for="description" class="col-3 col-form-label">Description:</label>
        <div class="col-9">
            <input type="text" id="description" class="form-control form-control-sm"/>
        </div>
    </div>

    <div class="form-group row">
        <div class="col-4 offset-8">
            <input type="button" th:value="'Cancel Class'" class="btn btn-danger"/>
        </div>
    </div>

    <ul class="nav nav-pills">
        <li class="active"><a data-toggle="pill" class="js_registration" href="#registration">Registration</a></li>
        <li><a data-toggle="pill" href="#attendance">Attendance</a></li>
    </ul>

    <div class="tab-content">
        <div id="registration" class="tab-pane fade in active">
            <p id="tab-registration" th:replace="items/class-event :: registration"></p>
        </div>
        <div id="attendance" class="tab-pane fade">
            <p th:replace="items/class-event :: attendance"></p>
        </div>
    </div>
</div>


<!-- Class Event Registration -->
<p th:fragment="registration">

    <table class="event-registration">
    <thead>
    <tr>
        <th width="10%">Members</th>
        <th width="10%">Temporary</th>
        <th width="25%">Name</th>
        <th width="25%"></th>
        <th width="30%"></th>
    </tr>
    </thead>
    <tbody>

    <tr th:if="${event.AttendanceTeacherForm!=null}"> <!-- teacher -->
        <td>
            <label th:replace="items/class-event :: seat-fixed(${event.attendanceTeacherForm})" ></label>
        </td>
        <td>
            <label th:replace="items/class-event :: seat-temporary(${event.attendanceTeacherForm})"></label>
        </td>
        <td th:if="${event.attendanceTeacherForm.name!=null}" th:text="${event.attendanceTeacherForm.name}"></td>
        <td th:unless="${event.attendanceTeacherForm.name!=null}">
            <div th:replace="items/class-event :: select-teacher"></div>
        </td>
        <td><div th:replace="items/class-event :: action(1, 2, ${event.attendanceTeacherForm.action})"></div></td>
        <td><div th:replace="items/class-event :: action(1, 2, ${event.attendanceTeacherForm.action2})"></div></td>
    </tr>

        <!-- pupils -->
    <tr th:if="${event.attendanceForm!=null}" th:each="att : ${event.attendanceForm}">
        <td>
            <label th:replace="items/class-event :: seat-fixed(${att})" ></label>
        </td>
        <td>
            <label th:replace="items/class-event :: seat-temporary(${att})"></label>
        </td>
        <td th:if="${att.name!=null}" th:text="${att.name}"></td>
        <td th:unless="${att.name!=null}">
            <div th:replace="items/class-event :: select-pupil"></div>
        </td>
        <td><div th:replace="items/class-event :: action(1, 2, ${att.action})"></div></td>
        <td><div th:replace="items/class-event :: action(1, 2, ${att.action2})"></div></td>
    </tr>


    </tbody>
    </table>
</p>

<!-- Class Event Attendance -->
<p th:fragment="attendance">

    tu sa vygeneruje tabulka dochadzky
</p>

<!-- seat image fixed -->
<label th:fragment="seat-fixed(att)">
    <input type="radio" th:name="'seat'+${att.id}" value="fixed" />
    <img th:if="${att.fixed!=null}" th:src="'/static/img/'+${att.fixed.url}"/>
</label>

<!-- seat image temporary -->
<label th:fragment="seat-temporary(att)">
    <input type="radio" th:name="'seat'+${att.id}" value="temporary" />
    <img th:if="${att.temporary!=null}" th:src="'/static/img/'+${att.temporary.url}"/>
</label>

<!-- choosing teacher from selectbox2 -->
<div th:fragment="select-teacher">
    <select size="50" class="js-teacher" data-placeholder="Search a teacher"
            name="teacher">
    </select>
</div>

<!-- choosing pupil from selectbox2 -->
<div th:fragment="select-pupil">
    <select  size="50" class="js-pupil" data-placeholder="Search a pupil"
            name="pupil">
    </select>
</div>

<!-- action buttons -->
<div th:fragment="action(user, attendance, type)">

    <button th:if="${type==T(com.vitta_pilates.core.event.component.AttendanceForm.Action).ENROLL}"
            th:text="enroll" data-th-attendance="${attendance}" data-th-user="${user}">
    </button>
    <button th:if="${type==T(com.vitta_pilates.core.event.component.AttendanceForm.Action).UNENROLL}"
            th:text="unenroll" data-th-attendance="${attendance}" data-th-user="${user}">
    </button>
    <button th:if="${type==T(com.vitta_pilates.core.event.component.AttendanceForm.Action).SUSPEND}"
            th:text="suspend" data-th-attendance="${attendance}" data-th-user="${user}">
    </button>
    <button th:if="${type==T(com.vitta_pilates.core.event.component.AttendanceForm.Action).UNSUSPEND}"
            th:text="unsuspend" data-th-attendance="${attendance}" data-th-user="${user}">
    </button>
    <span th:if="${type==''}"></span>
</div>

</html>